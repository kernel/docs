---
title: "Secrets"
---

There are multiple ways to pass secrets and API keys to your Kernel app:

## 1. Deployment environment variables

Deploy your app with secrets as [environment variables](/apps/deploy#environment-variables). Your app can then access them at runtime.

You can set environment variables in two ways:

- **`--env` flag**: Pass individual key-value pairs directly in the command
- **`--env-file` flag**: Load variables from a `.env` file

```bash
# Using --env flag for individual variables
kernel deploy my_app.ts --env OPENAI_API_KEY=sk-... --env ANTHROPIC_API_KEY=sk-ant-...

# Using --env-file to load from a file
kernel deploy my_app.ts --env-file .env

# Combine both approaches
kernel deploy my_app.ts --env-file .env --env OPENAI_API_KEY=sk-...
```

Then access the variables in your app:

<CodeGroup>
```typescript TypeScript
import Anthropic from "@anthropic-ai/sdk";
import OpenAI from "openai";

app.action('ai-action', async (ctx: KernelContext) => {
  // Access API keys from environment variables
  const anthropic = new Anthropic({
    apiKey: process.env.ANTHROPIC_API_KEY,
  });

  const openai = new OpenAI({
    apiKey: process.env.OPENAI_API_KEY,
  });

  // Use the clients...
});
```

```python Python
import os
from anthropic import Anthropic
from openai import OpenAI

@app.action("ai-action")
async def ai_action(ctx: KernelContext):
    # Access API keys from environment variables
    anthropic = Anthropic(
        api_key=os.environ.get("ANTHROPIC_API_KEY"),
    )

    openai = OpenAI(
        api_key=os.environ.get("OPENAI_API_KEY"),
    )

    # Use the clients...
```
</CodeGroup>

## 2. Runtime variables
For use cases that login on behalf of many users (such as platforms acting on behalf of end users), pass the credentials at runtime using the [payload parameter](/apps/invoke#payload-parameter).

Make sure to use encryption standards in your app to protect the credentials.

<CodeGroup>
```typescript Typescript/Javascript
app.action('authenticated-action', async (ctx: KernelContext, payload) => {
  if (!loggedIn()) {
    const username = decrypt(payload.encryptedUserName);
    const password = decrypt(payload.encryptedPassword);
    login(username, password);
  }
});
```

```python Python
@app.action("authenticated-action")
async def authenticated_action(ctx: KernelContext, payload):
    if not logged_in():
        username = decrypt(payload["encryptedUserName"])
        password = decrypt(payload["encryptedPassword"])
        login(username, password)
```
</CodeGroup>